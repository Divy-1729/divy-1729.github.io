<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Blog</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="main">
    <div class="container">
      <h1>Blog</h1>
      <div id="blog-posts" class="posts-list"></div>
    </div>
  </main>

  <script type="module">
    // Blog posts data
    const blogPosts = [
      {
        date: '2025-01-15',
        title: 'Getting Started with Modern Web Development',
        description: 'An overview of the latest tools and frameworks that make web development faster and more efficient. Learn about the ecosystem and best practices.',
        slug: 'getting-started-modern-web-dev'
      },
      {
        date: '2025-01-08',
        title: 'Understanding Async Programming',
        description: 'A deep dive into asynchronous programming patterns, promises, async/await, and how to handle complex asynchronous flows in JavaScript.',
        slug: 'understanding-async-programming'
      },
      {
        date: '2025-01-01',
        title: 'The Future of Frontend Frameworks',
        description: 'Exploring emerging trends in frontend development, from server components to new rendering strategies and what they mean for developers.',
        slug: 'future-of-frontend-frameworks'
      },
      {
        date: '2024-12-20',
        title: 'Building Scalable Applications',
        description: 'Best practices for architecting applications that can grow with your user base. Learn about microservices, caching strategies, and database optimization.',
        slug: 'building-scalable-applications'
      },
      // New music post entry so it appears in the blog index
      {
        date: '2025-11-11',
        title: 'My favorite music to listen to',
        description: "I've spent some time curating my music taste. I spend a lot of time listening to music, so here are some recommendations.",
        slug: 'music_post'
      }
    ];

    // Helper to format ISO date to a nicer string
    function formatDate(iso) {
      if (!iso) return '';
      const d = new Date(iso);
      if (Number.isNaN(d.getTime())) return iso;
      return d.toLocaleDateString(undefined, { year: 'numeric', month: 'long', day: 'numeric' });
    }

    // Render posts into the page
    function renderBlogPosts() {
      const blogPostsContainer = document.getElementById('blog-posts');
      if (!blogPostsContainer) return;

      if (!blogPosts || blogPosts.length === 0) {
        blogPostsContainer.innerHTML = '<p style="color: var(--text-secondary);">Coming Soon</p>';
        return;
      }

      const html = blogPosts.map(post => {
        // Try posts/<slug>.html by default; if you use folder per post, change to `posts/${post.slug}/`
        const url = `posts/${post.slug}.html`;
        return `
          <article class="post-preview">
            <a class="post-link" href="${url}">
              <h2 class="post-title">${post.title}</h2>
            </a>
            <div class="post-meta">${formatDate(post.date)}</div>
            <p class="post-excerpt">${post.description}</p>
          </article>
        `;
      }).join('\n');

      blogPostsContainer.innerHTML = html;
    }

    // Initialize
    renderBlogPosts();
  </script>
</body>
</html>
