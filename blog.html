<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>All Posts</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    /* Layout and spacing only - do not change site background/font */
    .page {
      max-width: 1100px;
      margin: 0 auto;
      padding: 3rem 1.25rem;
    }

    .posts-header {
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:1rem;
      margin-bottom: 2rem;
    }

    .posts-title {
      font-size: 2.25rem;
      font-weight: 700;
      margin: 0;
      letter-spacing: 0.06em;
      /* inherit site's font and color */
      color: inherit;
    }

    .filter-btn {
      background: rgba(255,255,255,0.06);
      color: inherit;
      border: none;
      padding: 0.6rem 1rem;
      border-radius: 10px;
      cursor:pointer;
      align-self:flex-start;
    }

    .year {
      font-size: 1.6rem;
      margin: 1.5rem 0 1rem 0;
      font-weight:700;
    }

    .month {
      font-size: 1.05rem;
      margin: 1rem 0 0.6rem 0;
      font-weight:700;
    }

    .month-block {
      padding: 0.5rem 0 1rem 0;
      border-bottom: 1px solid rgba(0,0,0,0.04);
      margin-bottom: 1rem;
    }

    .posts-list {
      display:flex;
      flex-direction:column;
      gap: 0.25rem;
    }

    .post-row {
      display:grid;
      grid-template-columns: 72px 1fr;
      gap: 1rem;
      align-items:center;
      padding: 0.5rem 0;
    }

    .post-date {
      color: rgba(0,0,0,0.55);
      font-size: 0.95rem;
      text-align:right;
      padding-right: .5rem;
      opacity: 0.9;
    }

    .post-title {
      font-size: 1.15rem;
      margin:0;
      color: inherit;
      text-decoration: none;
    }

    .post-title a {
      color: inherit;
      text-decoration: none;
    }

    .post-title a.accent {
      color: #9b2bff; /* purple accent for special posts */
    }

    .post-excerpt {
      margin: 0.25rem 0 0 0;
      color: rgba(0,0,0,0.6);
      font-size: 0.95rem;
      max-width: 70ch;
      color : inherit;
    }

    @media (max-width: 700px) {
      .post-row { grid-template-columns: 64px 1fr; }
      .posts-title { font-size: 1.8rem; }
      .filter-btn { padding: 0.5rem 0.75rem; font-size:0.85rem; }
    }
  </style>
</head>
<body>
  <!-- Site header - kept consistent with other pages -->
  <header class="header">
    <nav class="nav">
      <div class="nav-brand">
        <a href="index.html">Home</a>
      </div>
      <div class="nav-links">
        <a href="index.html" class="nav-link">Home</a>
        <a href="blog.html" class="nav-link">Blog</a>
        <a href="about.html" class="nav-link">About</a>
        <a href="https://github.com/Divy-1729" class="nav-link" target="_blank" rel="noopener noreferrer">GitHub ↗</a>
      </div>
    </nav>
  </header>

  <main class="page">
    <div class="posts-header">
      <h1 class="posts-title">All Posts</h1>
      <button class="filter-btn" aria-label="Filter posts">Filter</button>
    </div>

    <div id="posts-root">
      <!-- JS will render posts here -->
    </div>
  </main>

  <footer class="footer">
    <div style="max-width:1100px;margin:0 auto;padding:1rem 1.25rem;color:inherit">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div style="opacity:.8">© 2025</div>
        <div style="display:flex;gap:1rem">
          <a href="index.html" style="text-decoration:none;color:inherit">Home</a>
          <a href="blog.html" style="text-decoration:none;color:inherit">Blog</a>
          <a href="about.html" style="text-decoration:none;color:inherit">About</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Your blog posts - update as needed
    const blogPosts = [
      {
        date: '2025-11-11',
        title: 'My favorite music to listen to',
        description: "I've spent some time curating my music taste. I spend a lot of time listening to music, so here are some recommendations.",
        slug: 'music_post',
        accent: false
      },
    ];

    function groupByYearMonth(posts) {
      const map = new Map();
      posts.forEach(p => {
        const d = new Date(p.date);
        const year = d.getFullYear();
        const monthIndex = d.getMonth(); // 0-11
        const monthName = d.toLocaleString(undefined, { month: 'long' });
        if (!map.has(year)) map.set(year, new Map());
        const months = map.get(year);
        if (!months.has(monthIndex)) months.set(monthIndex, { name: monthName, posts: [] });
        months.get(monthIndex).posts.push(p);
      });
      // Sort years desc, months desc
      const sorted = Array.from(map.entries()).sort((a,b)=>b[0]-a[0]).map(([year, monthsMap])=>{
        const monthsArr = Array.from(monthsMap.entries()).sort((a,b)=>b[0]-a[0]).map(([idx, val])=>{
          val.posts.sort((x,y)=>new Date(y.date)-new Date(x.date));
          return { monthIndex: idx, name: val.name, posts: val.posts };
        });
        return { year, months: monthsArr };
      });
      return sorted;
    }

    function formatMMDD(dateStr){
      const d = new Date(dateStr);
      const mm = String(d.getMonth()+1).padStart(2,'0');
      const dd = String(d.getDate()).padStart(2,'0');
      return `${mm}-${dd}`;
    }

    function render() {
      const root = document.getElementById('posts-root');
      const grouped = groupByYearMonth(blogPosts);
      const fragment = document.createDocumentFragment();

      grouped.forEach(yearBlock => {
        const yearEl = document.createElement('div');
        const y = document.createElement('div');
        y.className = 'year';
        y.textContent = yearBlock.year;
        yearEl.appendChild(y);

        yearBlock.months.forEach(month => {
          const monthBlock = document.createElement('div');
          monthBlock.className = 'month-block';

          const mn = document.createElement('div');
          mn.className = 'month';
          mn.textContent = month.name;
          monthBlock.appendChild(mn);

          const list = document.createElement('div');
          list.className = 'posts-list';

          month.posts.forEach(post => {
            const row = document.createElement('div');
            row.className = 'post-row';

            const dateCol = document.createElement('div');
            dateCol.className = 'post-date';
            dateCol.textContent = formatMMDD(post.date);

            const contentCol = document.createElement('div');
            const title = document.createElement('h3');
            title.className = 'post-title';
            const a = document.createElement('a');
            a.href = `posts/${post.slug}.html`;
            a.textContent = post.title;
            if (post.accent) a.classList.add('accent');
            title.appendChild(a);

            const excerpt = document.createElement('p');
            excerpt.className = 'post-excerpt';
            excerpt.textContent = post.description;

            contentCol.appendChild(title);
            contentCol.appendChild(excerpt);

            row.appendChild(dateCol);
            row.appendChild(contentCol);
            list.appendChild(row);
          });

          monthBlock.appendChild(list);
          yearEl.appendChild(monthBlock);
        });

        fragment.appendChild(yearEl);
      });

      root.innerHTML = '';
      root.appendChild(fragment);
    }

    render();
  </script>
</body>
</html>
